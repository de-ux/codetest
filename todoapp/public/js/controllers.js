todoApp.controller("HomeCtrl",["$state",function(e){var t={signInSuccessUrl:"#/todos",credentialHelper:firebaseui.auth.CredentialHelper.NONE,signInOptions:[firebase.auth.EmailAuthProvider.PROVIDER_ID,firebase.auth.PhoneAuthProvider.PROVIDER_ID]};firebaseui.auth.AuthUI.getInstance()?firebaseui.auth.AuthUI.getInstance().start("#firebaseui-auth-container",t):new firebaseui.auth.AuthUI(firebase.auth()).start("#firebaseui-auth-container",t),firebase.auth().onAuthStateChanged(function(t){t&&e.go("todos",{},{reload:"todos"})})}]);
todoApp.controller("SignoutCtrl",["$state",function(t){firebase.auth().onAuthStateChanged(function(o){o&&(firebase.auth().signOut(),t.go("home",{},{reload:"home"}))})}]);
todoApp.controller("TodosCtrl",["$scope","$timeout",function(e,o){firebase.auth().onAuthStateChanged(function(d){d&&o(function(){e.uid=d.uid,e.name=d.displayName,e.ref=firebase.database().ref(e.uid+"/todos/"),t(e.uid)})});var t=function(o){return e.ref.once("value").then(function(o){e.todos=o.val(),e.$apply()})};e.addTodo=function(o){firebase.database().ref(e.uid+"/todos/"+e.todoText.replace(/\s/g,"")).push({todo:e.todoText}),e.todoText="",t(e.uid)},e.deleteTodo=function(o){firebase.database().ref(e.uid).once("value",function(d){d.hasChild("todos")&&(e.ref.child(o).remove(),t(e.uid))})},e.deleteAll=function(){firebase.database().ref(e.uid).once("value",function(o){o.hasChild("todos")&&(e.ref.remove(),t(e.uid))})}}]);